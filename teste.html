<!DOCTYPE html>
<html>
	<head>
        <meta charset="UTF-8">
		<title>Solar System</title>
		<style>
			body {
                margin: 0;
            }
            /* #c {
                width: 100%;
                height: 100%;
                display: block;
                background: url(img/2k_stars_milky_way.jpg) no-repeat center center;
                background-size: cover;
            } */
            canvas {
                    display: block;
                    background: url(img/2k_stars_milky_way.jpg) no-repeat center center;
                    background-size: cover;
                    }
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
		<script>
            //inicio da cena e da câmera
			const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
            const renderer = new THREE.WebGLRenderer({
                alpha: true,
            });
            renderer.setSize( window.innerWidth, window.innerHeight );
            document.body.appendChild( renderer.domElement );
        

            // var loader = new THREE.TextureLoader();
            // const planet = function (size, color, pathTexture = null) {
            //     const earthgeometry = new THREE.SphereGeometry( size, 100, 100 );
            //     const earthmaterial = new THREE.MeshPhongMaterial({
            //         // color: color,
            //     // color: 0xFF1F00,
            //         map: loader.load(pathTexture),
            //         flatShading: true,
            //         });
            //     const earth = new THREE.Mesh( earthgeometry, earthmaterial );
            //     return earth;
            // };
			// const renderer = new THREE.WebGLRenderer();

            // posição da câmera
            camera.position.z = 130;
            camera.position.y = 60;
            camera.rotation.x = -0.2;

            
            //ambiance light
            const lightamb = new THREE.AmbientLight( 0x373030 ); // soft white light
            scene.add( lightamb );

            // //sol
            // const sunRatio = 30.0;
			// const sungeometry = new THREE.SphereGeometry( sunRatio, 100, 100 );
            // const sunmaterial = new THREE.MeshBasicMaterial({
            //     map: loader.load('img/2k_sun.jpg'),
            //     flatShading: true,
            //     });
            // const sun = new THREE.Mesh( sungeometry, sunmaterial );
            // sun.position.z = -300;
            // scene.add( sun );
            // // sun light
            const pointLight = new THREE.PointLight( 0xffffff, 1.0 );
            pointLight.position.z = -300;
            scene.add( pointLight );

            const orbit = function (ratio) {
                const geo = new THREE.RingGeometry( ratio, ratio +0.5, 100);
                const mat = new THREE.LineBasicMaterial({color: 0xFFFFFF });
                const line = new THREE.Mesh( geo, mat );
                return line;
            }

            // //mercury
            // const mercuryRatio = 5.0;
            // const mercury = planet(mercuryRatio, 0x5d615e, 'img/2k_mercury.jpg')
            // sun.add( mercury );

            // //venus
            // const venusRatio = 10.0;
            // const venus = planet(venusRatio, 0x5d615e, 'img/2k_venus.jpg')
            // sun.add( venus );

            // //earth
            // const earthRatio = 11.0;
            // const earth = planet(earthRatio, 0x0000FF, 'img/2k_earth.jpg')
            // sun.add( earth );

            // //mars
            // const marsRatio = 6.0;
            // const mars = planet(marsRatio, 0x0000FF, 'img/2k_mars.jpg')
            // sun.add( mars );

            // //jupter
            // const jupterRatio = 22.0;
            // const jupter = planet(jupterRatio, 0xFF7F00, 'img/2k_jupiter.jpg')
            // sun.add( jupter );

            //saturn
            const saturnRatio = 10.0;
            const saturngeometry = new THREE.SphereGeometry( saturnRatio, 100, 100 );
            const saturnmaterial = new THREE.MeshBasicMaterial( { color: 0xF0FF00 } );
            const saturn = new THREE.Mesh( saturngeometry, saturnmaterial );
            scene.add( saturn );
            // const ringgeometry = new THREE.RingGeometry( 30, 17, 50 );
            // const ringmaterial = new THREE.MeshBasicMaterial( { color: 0xF0F0FF } );
            // const ring = new THREE.Mesh( ringgeometry, ringmaterial );
            // ring.rotation.y = -100*Math.PI/180;
            // saturn.rotation.z = 90*Math.PI/180;
            // ring.rotation.y = -85*Math.PI/180;
            // saturn.add( ring );

            const phobosRatio = 2.0;
            const phobosgeometry = new THREE.SphereGeometry( phobosRatio, 100, 100 );
            const phobosmaterial = new THREE.MeshBasicMaterial( { color: 0xFF0000 } );
            const phobos = new THREE.Mesh( phobosgeometry, phobosmaterial );
            saturn.add( phobos );
            phobos.position.z = 2.0;
            //deimos
            const deimosRatio = 1.5;
            const deimosgeometry = new THREE.SphereGeometry( deimosRatio, 100, 100 );
            const deimosmaterial = new THREE.MeshBasicMaterial( { color: 0xFF0000 } );
            const deimos = new THREE.Mesh( deimosgeometry, deimosmaterial );
            moonsJ = [];
            moonsJraios = [];
            moonsJangle = [];
            // raios = 20.0;
            angles = 0.12;
            ypos = -10.0;
            for(var i = 0; i < 5; i++) {
                angles += 0.1;
                ypos += 3.0;
                let raios = Math.random() * (28.0 - 20.0) + 20.0;
                console.log(raios);
                var ratios = Math.random() * (2.0 - 1.0) + 1.0;
                let deimosgeometry = new THREE.SphereGeometry( ratios, 100, 100 );
                let deimosmaterial = new THREE.MeshBasicMaterial( { color: 0xFF0000 } );
                moonsJ.push(new THREE.Mesh( deimosgeometry, deimosmaterial ))
                moonsJangle.push(angles);
                moonsJraios.push(raios);
                saturn.add( moonsJ[i] );
                moonsJ[i].position.y = ypos;
                moonsJ[i].position.z = moonsJraios[i]*Math.sin(moonsJangle[i]);
                moonsJ[i].position.x = moonsJraios[i]*Math.cos(moonsJangle[i]);
            }
            let jupLine = orbit(moonsJraios[3]);
            saturn.add( jupLine );
            jupLine.rotation.x = -90.0*Math.PI/180.0;
            saturn.add( deimos );
            phobos.position.y = 7.0;
            raiodeimos = 20.0;
            raiophobos= 20.0;
            angledeimos = 0.01;
            anglephobos = 3.5;
            phobos.position.z = raiophobos*Math.sin(anglephobos);
            phobos.position.x = raiophobos*Math.cos(anglephobos);
            deimos.position.z = raiodeimos*Math.sin(angledeimos);
            deimos.position.x = raiodeimos*Math.cos(angledeimos);
            // deimos.position.z = -2.0;
            renderer.render( scene, camera );


		</script>
	</body>
</html>