<!DOCTYPE html>
<html>
	<head>
        <meta charset="UTF-8">
		<title>Solar System</title>
		<style>
			body { margin: 0; }
			canvas { display: block; }
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
		<script>
            // import * as THREE from './resources/threejs/r122/build/three.module.js';
            
            //inicio da cena e da câmera
			const scene = new THREE.Scene();
			const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

            var loader = new THREE.TextureLoader();
            const planet = function (size, color, pathTexture = null) {
                var loaderi = new THREE.TextureLoader();
                console.log("entrou", loaderi.load(pathTexture));
                const earthgeometry = new THREE.SphereGeometry( size, 32, 32 );
                const earthmaterial = new THREE.MeshPhongMaterial({
                    // color: color,
                    map: loader.load(pathTexture),
                    flatShading: true,
                    });
                const earth = new THREE.Mesh( earthgeometry, earthmaterial );
                return earth;
            };

			const renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );

            // posição da câmera
            camera.position.z = 100;
            camera.position.y = 50;
            
            //ambiance light
            const lightamb = new THREE.AmbientLight( 0xF0F0F0 ); // soft white light
            scene.add( lightamb );

            //sol
            const sunRatio = 30.0;
			const sungeometry = new THREE.SphereGeometry( sunRatio, 32, 32 );
            const sunmaterial = new THREE.MeshBasicMaterial({
                map: loader.load('img/2k_sun.jpg'),
                flatShading: true,
                // emissive: 0xFFe100,
                // emissiveIntensity: 0.5,
                });
            const sun = new THREE.Mesh( sungeometry, sunmaterial );
            sun.position.z = -300;
            scene.add( sun );
            // sun light
            const pointLight = new THREE.PointLight( 0xffffff, 1.0 );
            pointLight.position.z = -300;
            scene.add( pointLight );

            //earth
            const earthRatio = 2.7;
            const earth = planet(earthRatio, 0x0000FF, 'img/2k_earth.jpg')
            sun.add( earth );

            //mercury
            const mercuryRatio = 1.0;
            const mercury = planet(mercuryRatio, 0x5d615e, 'img/2k_mercury.jpg')
            sun.add( mercury );

            //jupter
            const jupterRatio = 8.0;
            const jupter = planet(jupterRatio, 0xFF7F00, 'img/2k_jupiter.jpg')
            sun.add( jupter );
            
            // velocidades angulares dos planetas
            angleE = 0;
            angleM = 0;
            angleJ = 0;
            //animação dos planetas (translação e rotação)
			const animate = function () {
				requestAnimationFrame( animate );
                angleE += 0.05;
                angleM += 0.025;
                angleJ += 0.0185;
                sun.rotation.y += 0.01;
                //earth
                earth.rotation.y += 0.01;
                earth.position.z = 100*Math.sin(angleE);
                earth.position.x = 100*Math.cos(angleE);
                //mercury
                mercury.rotation.y += 0.01;
                mercury.position.z = 170*Math.sin(angleM);
                mercury.position.x = 170*Math.cos(angleM);
                // jupter
                jupter.rotation.y += 0.01;
                jupter.position.z = 250*Math.sin(angleJ);
                jupter.position.x = 250*Math.cos(angleJ);
                

				renderer.render( scene, camera );
			};

			animate();
		</script>
	</body>
</html>