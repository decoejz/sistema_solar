<!DOCTYPE html>
<html>
	<head>
        <meta charset="UTF-8">
		<title>Solar System</title>
		<style>
			body { margin: 0; }
			canvas { display: block; }
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
		<script>
            
            //inicio da cena e da câmera
			const scene = new THREE.Scene();
			const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

            var loader = new THREE.TextureLoader();
            const planet = function (size, color, pathTexture = null) {
                const earthgeometry = new THREE.SphereGeometry( size, 100, 100 );
                const earthmaterial = new THREE.MeshPhongMaterial({
                    // color: color,
                // color: 0xFF1F00,
                    map: loader.load(pathTexture),
                    flatShading: true,
                    });
                const earth = new THREE.Mesh( earthgeometry, earthmaterial );
                return earth;
            };

			const renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );

            // posição da câmera
            camera.position.z = 130;
            camera.position.y = 100;
            camera.rotation.x = -0.2;

            
            //ambiance light
            const lightamb = new THREE.AmbientLight( 0x373030 ); // soft white light
            scene.add( lightamb );

            //sol
            const sunRatio = 30.0;
			const sungeometry = new THREE.SphereGeometry( sunRatio, 100, 100 );
            const sunmaterial = new THREE.MeshBasicMaterial({
                map: loader.load('img/2k_sun.jpg'),
                flatShading: true,
                });
            const sun = new THREE.Mesh( sungeometry, sunmaterial );
            sun.position.z = -300;
            scene.add( sun );
            // sun light
            const pointLight = new THREE.PointLight( 0xffffff, 1.0 );
            pointLight.position.z = -300;
            scene.add( pointLight );

            //mercury
            const mercuryRatio = 5.0;
            const mercury = planet(mercuryRatio, 0x5d615e, 'img/2k_mercury.jpg')
            sun.add( mercury );

            //venus
            const venusRatio = 10.0;
            const venus = planet(venusRatio, 0x5d615e, 'img/2k_venus.jpg')
            sun.add( venus );

            //earth
            const earthRatio = 11.0;
            const earth = planet(earthRatio, 0x0000FF, 'img/2k_earth.jpg')
            sun.add( earth );

            //mars
            const marsRatio = 6.0;
            const mars = planet(marsRatio, 0x0000FF, 'img/2k_mars.jpg')
            sun.add( mars );

            //jupter
            const jupterRatio = 22.0;
            const jupter = planet(jupterRatio, 0xFF7F00, 'img/2k_jupiter.jpg')
            sun.add( jupter );

            //saturn
            const saturnRatio = 15.0;
            const saturn = planet(saturnRatio, 0xFF7F00, 'img/2k_saturn.jpg')
            sun.add( saturn );
            const ringgeometry = new THREE.RingGeometry( 20, 17, 50 );
            const ringmaterial = new THREE.MeshBasicMaterial( { map: loader.load('img/2k_saturn_ring.png') } );
            const ring = new THREE.Mesh( ringgeometry, ringmaterial );
            ring.rotation.y = -100*Math.PI/180;
            saturn.rotation.z = -90*Math.PI/180;
            saturn.add( ring );
            
            // velocidades angulares dos planetas
            angleM = 0;
            angleV = 0;
            angleE = 0;
            angleMars = 0;
            angleJ = 0;
            angleS = 0;

            raioM = 60;
            raioV = 100;
            raioE = 130;
            raioMars = 180;
            raioJ = 230;
            raioS = 290;

            //animação dos planetas (translação e rotação)
			const animate = function () {
				requestAnimationFrame( animate );
                angleM += 0.05;
                angleV += 0.04;
                angleE += 0.03;
                angleMars += 0.025;
                angleJ += 0.015;
                angleS += 0.005;

                sun.rotation.y += 0.01;
                //mercury
                mercury.rotation.y += 0.01;
                mercury.position.z = raioM*Math.sin(angleM);
                mercury.position.x = raioM*Math.cos(angleM);
                //venus
                venus.rotation.y += 0.01;
                venus.position.z = raioV*Math.sin(angleV);
                venus.position.x = raioV*Math.cos(angleV);
                //earth
                earth.rotation.y += 0.01;
                earth.position.z = raioE*Math.sin(angleE);
                earth.position.x = raioE*Math.cos(angleE);
                //mars
                mars.rotation.y += 0.01;
                mars.position.z = raioMars*Math.sin(angleMars);
                mars.position.x = raioMars*Math.cos(angleMars);
                
                // jupter
                jupter.rotation.y += 0.01;
                jupter.position.z = raioJ*Math.sin(angleJ);
                jupter.position.x = raioJ*Math.cos(angleJ);

                // saturn
                saturn.rotation.y += 0.01;
                saturn.position.z = raioS*Math.sin(angleS);
                saturn.position.x = raioS*Math.cos(angleS);
                

				renderer.render( scene, camera );
			};

			animate();
		</script>
	</body>
</html>